<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Knockout : The "template" binding</title>
        <link href="../css/tripoli.simple.css" type="text/css" rel="stylesheet" /> 
        <link rel="stylesheet" type="text/css" href="../css/styles.css" />
        <link rel="stylesheet" type="text/css" href="../css/smallScreen.css" media="only screen and (max-device-width: 800px)" />
        <!--[if IE]><link rel="stylesheet" type="text/css" href="../css/tripoli.simple.ie.css" /><![endif]-->
        <!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="../css/ie6ie7.css" /><![endif]-->
        <!--[if lte IE 6]><link rel="stylesheet" type="text/css" href="../css/ie6.css" /><![endif]-->
        <script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="../js/jquery.tmpl.js"></script>
<script type="text/javascript" src="../js/knockout-1.1.2.js"></script>
<script type="text/javascript" src="../js/cufon-yui.js"></script>
<script type="text/javascript" src="../js/titilliummaps.font.js"></script>
<script type="text/javascript" src="../js/json2.js"></script>

<!--[if lt IE 7]>
<script defer type="text/javascript" src="../js/ie6pngfix.js"></script>
<![endif]-->

<script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shCore.js"></script> 
<script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script> 
<script type="text/javascript" src="../js/syntaxhighlighter_3.0.83/scripts/shBrushXml.js"></script> 
<link type="text/css" rel="stylesheet" href="../js/syntaxhighlighter_3.0.83/styles/shThemeFadeToGrey.css"/>  

<script type="text/javascript">
    $(function() {
        // Fancy fonts
        Cufon.replace('.titillium');
        Cufon.replace('.engraved', {
            textShadow: 'rgba(253, 224, 217, 0.45) 1.2px 1px'	
        });
        
        // Syntax highlighting
        $("pre > code").each(function() {
            var codeText = $(this).text();
            $(this).parent().text(codeText).addClass("brush:js");
        });
        SyntaxHighlighter.defaults['toolbar'] = false;
        SyntaxHighlighter.defaults['gutter'] = false;
        SyntaxHighlighter.all();
        
        // Highlight current top menu item
        var desiredMenuItem = '' || 'documentation';
        $(".main-menu a[rel=" + desiredMenuItem + "]").addClass("active");
        
        // Highlight current left-hand-nav menu item
        var urlFilename = location.href.match(/\/([^\/]+)$/);
        if (urlFilename) {
            $(".leftColContents li:has(a[href$=" + urlFilename[1] + "])").addClass("active");
        }
    });
</script> 
    </head>
    <body>
        <div id="wrapper">
            <div class="vspace"></div>
            <div class="main-menu">
    <ul>
        <li><a rel="home" href="../index.html">Home</a></li>
        <li><a rel="installation" href="../documentation/installation.html">Download / Install</a></li>
        <li><a rel="examples" href="../examples/">Live examples</a></li>
        <li><a rel="documentation" href="../documentation/introduction.html">Documentation</a></li>
        <li><a href="http://groups.google.com/group/knockoutjs">Forum</a></li>
        <li><a href="http://github.com/SteveSanderson/knockout">Source</a></li>
    </ul>
</div>        	
<div class="clear"></div>
            <div class="vspace"></div>
            <div>	
	<div class="leftCol">		
		<div class="leftColBackground">&nbsp;</div>
		<div class="leftColContents">
			<h1>Getting started</h1>

<ol>
    <li><a href="introduction.html">How KO works and what benefits it brings</a></li>
    <li><a href="installation.html"><em>Downloading</em> and <em>installing</em></li>
    <li><a href="observables.html">Creating <em>view models</em>, <em>observables</em>, and <em>dependent observables</em></a></li>
    <li><a href="observableArrays.html">Working with <em>observable arrays</em></a></li>	
</ol>

<h1>Using built-in bindings</h1>

<h2>Controlling text and appearance</h2>
<ol>
    <li><a href="visible-binding.html">The <code>visible</code> binding</a></li>
    <li><a href="text-binding.html">The <code>text</code> binding</a></li>
    <li><a href="css-binding.html">The <code>css</code> binding</a></li>
    <li><a href="style-binding.html">The <code>style</code> binding</a></li>
</ol>

<h2>Working with form fields</h2>
<ol>
    <li><a href="click-binding.html">The <code>click</code> binding</a></li>
    <li><a href="submit-binding.html">The <code>submit</code> binding</a></li>
    <li><a href="enable-binding.html">The <code>enable</code> binding</a></li>
    <li><a href="disable-binding.html">The <code>disable</code> binding</a></li>
    <li><a href="value-binding.html">The <code>value</code> binding</a></li>
    <li><a href="checked-binding.html">The <code>checked</code> binding</a></li>
    <li><a href="options-binding.html">The <code>options</code> binding</a></li>
    <li><a href="selectedOptions-binding.html">The <code>selectedOptions</code> binding</a></li>
    <li><a href="uniqueName-binding.html">The <code>uniqueName</code> binding</a></li>		
</ol>

<h2>Rendering templates</h2>
<ol>
    <li><a href="template-binding.html">The <code>template</code> binding</a></li>
</ol>

<h2>Advanced techniques</h2>
<ol>
    <li><a href="custom-bindings.html">Creating custom bindings</a></li>
</ol>

<h2>Plugins</h2>
<ol>
	<li><a href="plugins.mapping.html">The <code>mapping</code> plugin</a></li>
</ol>

<h1>More information</h1>
<ol>
    <li><a href="browser-support.html">Browser support</a></li>
    <li><a href="http://groups.google.com/group/knockoutjs">Getting help</a></li>
    <li><a href="links.html">Links to tutorials &amp; examples</a></li>
</ol>
		</div>		
	</div>
	<div class="rightCol">
		<div class="sticker">
		    <div class="content">
		    	<h1>The "template" binding</h1>	
		    	<h3 id='purpose'>Purpose</h3>

<p>The <code>template</code> binding populates the associated DOM element with the results of rendering a template. Templates are a simple and convenient way to build sophisticated UI structures - possibly with repeating or nested blocks - as a function of your view model data.</p>

<p>By default, Knockout works with the <a href='http://api.jquery.com/jquery.tmpl/'>jquery.tmpl</a> template engine. Currently this template engine is a jQuery plugin, but it&#8217;s expected to be integrated into the core of jQuery 1.5. To use it, download and reference both <code>jquery.tmpl</code> and jQuery itself as described on <a href='installation.html'>the installation page</a>.</p>

<h3 id='example'>Example</h3>

<pre><code>&lt;div data-bind=&#39;template: &quot;personTemplate&quot;&#39;&gt; &lt;/div&gt;

&lt;script id=&#39;personTemplate&#39; type=&#39;text/html&#39;&gt;
	${ name } is ${ age } years old
	&lt;button data-bind=&#39;click: makeOlder&#39;&gt;Make older&lt;/button&gt;
&lt;/script&gt;

&lt;script type=&#39;text/javascript&#39;&gt;
    var viewModel = {
        name: ko.observable(&#39;Bert&#39;),
        age: ko.observable(78),
        makeOlder: function() {
            this.age(this.age() + 1);	
        }    	
    };	
    ko.applyBindings(viewModel);
&lt;/script&gt;</code></pre>

<p>Knockout automatically re-renders templates when any observables (or dependent observables) that they reference change value. In this example, the template will be re-rendered each time you click the button to make the person older.</p>

<h3 id='syntax'>Syntax</h3>

<p>You can use any legal syntax that your template engine supports. For <code>jquery.tmpl</code>, this includes</p>

<ul>
<li><code>${ someValue }</code> &#8212; <a href='http://api.jquery.com/template-tag-equal'>documentation</a></li>

<li><code>{{html someValue}}</code> &#8212; <a href='http://api.jquery.com/template-tag-html'>documentation</a></li>

<li><code>{{if someCondition}}</code> &#8212; <a href='http://api.jquery.com/template-tag-if'>documentation</a></li>

<li><code>{{else someCondition}}</code> &#8212; <a href='http://api.jquery.com/template-tag-else'>documentation</a></li>

<li><code>{{each someArray}}</code> &#8212; <a href='http://api.jquery.com/template-tag-each'>documentation</a>.</li>
</ul>

<p><strong>Using <code>{{each}}</code> with an observable array</strong></p>

<p>When using <code>{{each someArray}}</code>, if your value is an <a href='observableArrays.html'><code>observableArray</code></a>, you <em>must</em> pass the <em>underlying array</em> to <code>each</code> by writing <code>{{each myObservableArray()}}</code>, <em>not</em> just <code>{{each myObservableArray}}</code>.</p>

<h3 id='parameters'>Parameters</h3>

<ul>
<li>
<p>Main parameter</p>

<ul>
<li>
<p>Shorthand syntax: If you just supply a string value (as in the preceding example), KO will interpret this as the ID of a template to render. The data it supplies to the template will be your whole view model object (i.e., the object you originally passed to <code>ko.applyBindings</code>).</p>
</li>

<li>
<p>For more control, pass a JavaScript object with the following properties:</p>

<ul>
<li><code>name</code> (required) &#8212; the ID of a template to render.</li>

<li><code>data</code> (optional) &#8212; an object to supply as the data for the template to render. If you omit this parameter, KO will look for a <code>foreach</code> parameter, or will fall back on using your whole view model object.</li>

<li><code>foreach</code> (optional) &#8212; instructs KO to render the template in &#8220;foreach&#8221; mode - see <a href='#note_3_using_the__option'>Note 3</a> for details.</li>

<li><code>afterAdd</code> and/or <code>beforeRemove</code> (optional) &#8212; used in conjunction with <a href='#note_3_using_the__option'><code>foreach</code> mode</a>.</li>
</ul>
</li>
</ul>
</li>
</ul>

<p>Example of passing multiple parameters:</p>

<pre><code>&lt;div data-bind=&#39;template: { name: &quot;personTemplate&quot;, data: someObject }&#39;&gt; &lt;/div&gt;</code></pre>

<h3 id='note_1_rendering_nested_templates'>Note 1: Rendering nested templates</h3>

<p>Since you can use <code>data-bind</code> attributes from within templates, it&#8217;s trivial to set up nested templates &#8211; just use <code>data-bind=&#39;template: ...&#39;</code> again on an element inside your template.</p>

<p>This is better than using whatever native syntax your template engine has for nested templates (e.g., the <code>{{tmpl}}</code> syntax in <code>jquery.tmpl</code>). The advantage with Knockout&#8217;s syntax is that it enables Knockout to track dependencies separately at each level of template rendering, so if a dependency changes, KO only re-renders the innermost templates affected by that change, and doesn&#8217;t need to re-render everything. This significantly improves performance in demanding situations.</p>

<h3 id='note_2_how__differs_from_'>Note 2: How <code>${ val }</code> differs from <code>&lt;span data-bind=&#39;text: val&#39;&gt;&lt;/span&gt;</code></h3>

<p>When you use data binding attributes from inside a template, KO tracks the dependencies separately for that binding. When a model value changes, KO knows that it only needs to update the bound element and its children, and need not re-render the whole template. So, if you write <code>&lt;span data-bind=&#39;text: someObservableValue&#39;&gt;&lt;/span&gt;</code> and then <code>someObservableValue</code> changes, KO will simply update the text on that <code>&lt;span&gt;</code> element and doesn&#8217;t need to re-render the whole template.</p>

<p>However, if you access observables inline in a template (e.g., using <code>${ someObservableValue }</code>) then when any such observable changes, KO needs to re-render that whole template.</p>

<p>In some cases this means <code>&lt;span data-bind=&#39;text: someObservableValue&#39;&gt;&lt;/span&gt;</code> is better than <code>${ someObservableValue }</code> for performance and because it doesn&#8217;t interfere with the state of other nearby elements when its value updates. However, <code>${ someObservableValue }</code> is a tidy and concise syntax so is often preferable if your template is small and won&#8217;t update rapidly enough to cause a performance burden.</p>

<h3 id='note_3_using_the__option'>Note 3: Using the <code>foreach</code> option</h3>

<p>If you want to render a template once for each item in a collection, there are two main approaches:</p>

<ol>
<li>You can use your template engine&#8217;s native &#8216;each&#8217; support. For <code>jquery.tmpl</code>, this means using its <code>{{each}}</code> syntax to iterate over the array.</li>

<li>Alternatively, you can use Knockout&#8217;s <code>foreach</code> template rendering mode.</li>
</ol>

<p>Example:</p>

<pre><code>&lt;div data-bind=&#39;template: { name: &quot;personTemplate&quot;, 
                            foreach: someObservableArrayOfPeople }&#39;&gt; &lt;/div&gt;</code></pre>

<p>The benefits of the <code>foreach</code> template mode are:</p>

<ul>
<li>when you add items to your collection, KO will only render the template for the new item and will insert it into the existing DOM</li>

<li>when you remove items from your collection, KO will simply delete the associated elements from your DOM without re-rendering any template</li>

<li>KO allows you to give <code>afterAdd</code> and/or <code>beforeRemove</code> callbacks to manipulate the added/removed DOM elements in a custom way. This makes animated transitions easy, as in <a href='../examples/animatedTransitions.html'>this example</a>.</li>
</ul>

<p>This differs from the template engine&#8217;s native &#8216;each&#8217; support: after any change, the template engine is forced to re-render everything because it isn&#8217;t aware of KO&#8217;s dependency tracking mechanism.</p>

<p>For examples of using <code>foreach</code> mode, see the <a href='../examples/gridEditor.html'>grid editor</a> and the <a href='../examples/animatedTransitions.html'>animated transitions example</a>.</p>

<h3 id='note_using_a_different_template_engine'>Note: Using a different template engine</h3>

<p>If you want to use a different JavaScript-based template engine (perhaps because you don&#8217;t want to take a dependency on jQuery for some reason), it&#8217;s possible to do so by writing a KO driver for the template engine. For an example, see <code>jqueryTmplTemplateEngine.js</code> in the KO source code, though bear in mind that this is complicated by having to support multiple versions of <code>jquery.tmpl</code>. Supporting a single version of another template engine could be much simpler.</p>

<h3 id='dependencies'>Dependencies</h3>

<p>The <code>template</code> binding works only once you&#8217;ve referenced a suitable template engine, such as <code>jquery.tmpl</code> as described on <a href='installation.html'>the installation page</a>.</p>    
		    </div>
		    
		    <div class="clear"></div>
		</div>
	</div>	
</div>
            <div class="clear"></div>
            <div class="main-menu">
    <ul>
        <li><a rel="home" href="../index.html">Home</a></li>
        <li><a rel="installation" href="../documentation/installation.html">Download / Install</a></li>
        <li><a rel="examples" href="../examples/">Live examples</a></li>
        <li><a rel="documentation" href="../documentation/introduction.html">Documentation</a></li>
        <li><a href="http://groups.google.com/group/knockoutjs">Forum</a></li>
        <li><a href="http://github.com/SteveSanderson/knockout">Source</a></li>
    </ul>
</div>        	
<div class="clear"></div>
        </div>
        
        <div id="page-footer">(c) knockoutjs.com</div> 
        
        <script type="text/javascript">               
            // Analytics
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-65756-7']);
            _gaq.push(['_trackPageview']);	
            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();             
        </script>
    </body>
</html>